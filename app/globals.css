@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
  /* Added theme tokens used by toolbar utilities (HSL for alpha support) */
  --border: 0 0% 89.8%;
  --accent: 0 0% 96.1%;
  --primary: 0 0% 9%;
  --primary-foreground: 0 0% 98%;
  --muted: 0 0% 96.1%;
  --muted-foreground: 0 0% 45.1%;
  --ring: 0 0% 3.9%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
}

@theme inline {
  /* Map design tokens for Tailwind v4 utilities */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-border: hsl(var(--border));
  --color-accent: hsl(var(--accent));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-ring: hsl(var(--ring));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* ===== Chat Toolbar Styles (ported from ventiaam app/globals.css lines 1171–1443) ===== */
/* Source: C:\\Users\\venti\\NextJS_Projects\\ventiaam\\app\\globals.css (1171–1443) */
.chat-toolbar-modern {
  @apply w-full border-b border-border/20 bg-background/50 backdrop-blur-xl;
  position: relative;
  z-index: 10;
}

.chat-toolbar-container {
  @apply flex items-center justify-between gap-3 px-4 py-2.5 flex-nowrap;
  min-height: 48px;
}

/* Toolbar Sections */
.toolbar-section {
  @apply flex items-center gap-2;
}

.primary-section {
  @apply flex-1;
  /* Allow the left-side tools to scroll horizontally on constrained widths
     so the right-side icons remain accessible. */
  min-width: 0;
  overflow-x: auto;
}

/* Hide scrollbar visually while preserving scroll on WebKit */
.primary-section::-webkit-scrollbar { height: 6px; }
.primary-section::-webkit-scrollbar-track { background: transparent; }
.primary-section::-webkit-scrollbar-thumb { background: transparent; }

.secondary-section {
  @apply flex-shrink-0;
}

/* Toolbar Groups */
.toolbar-group {
  @apply flex items-center gap-1.5;
}

/* Toolbar Divider */
.toolbar-divider {
  @apply h-5 w-px bg-border/30 mx-1;
}

/* Modern Toolbar Button Base */
.toolbar-btn {
  @apply relative inline-flex items-center justify-center;
  @apply h-8 w-8 rounded-lg;
  @apply text-muted-foreground;
  @apply transition-all duration-200 ease-out;
  @apply hover:bg-accent/80 hover:text-foreground;
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1;
  @apply disabled:pointer-events-none disabled:opacity-50;
  background: transparent;
  border: 1px solid transparent;
}

/* Icon sizing */
.toolbar-icon {
  @apply h-4 w-4;
  transition: transform 0.2s ease;
}

/* Hover effects */
.toolbar-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.toolbar-btn:hover:not(:disabled) .toolbar-icon {
  transform: scale(1.1);
}

/* Active state */
.toolbar-btn:active:not(:disabled) {
  transform: translateY(0);
  transition: transform 0.1s ease;
}

/* Active/Selected state */
.toolbar-btn-active {
  @apply bg-primary/10 text-primary border-primary/20;
  box-shadow: 0 0 0 1px rgba(var(--primary), 0.1);
}

.toolbar-btn-active:hover:not(:disabled) {
  @apply bg-primary/15 border-primary/30;
}

/* Specific button variants - using neutral black/grey */
.toolbar-btn-vector-active {
  @apply bg-gray-900/90 text-white border-gray-700;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.3);
}

.dark .toolbar-btn-vector-active {
  @apply bg-gray-100/90 text-gray-900 border-gray-300;
  box-shadow: 0 0 12px rgba(255, 255, 255, 0.2);
}

.toolbar-btn-table-active {
  @apply bg-gray-900/90 text-white border-gray-700;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.3);
}

.dark .toolbar-btn-table-active {
  @apply bg-gray-100/90 text-gray-900 border-gray-300;
  box-shadow: 0 0 12px rgba(255, 255, 255, 0.2);
}

.toolbar-btn-voice.toolbar-btn-active {
  @apply bg-emerald-500/10 text-emerald-600 border-emerald-500/20;
  box-shadow: 0 0 12px rgba(16, 185, 129, 0.15);
}

.dark .toolbar-btn-voice.toolbar-btn-active {
  @apply bg-emerald-500/15 text-emerald-400 border-emerald-500/30;
}

.toolbar-btn-stop {
  @apply h-8 px-3 bg-red-500/10 text-red-600 border-red-500/20;
  @apply hover:bg-red-500/15 hover:border-red-500/30;
  animation: pulse-stop 2s ease-in-out infinite;
}

.dark .toolbar-btn-stop {
  @apply bg-red-500/15 text-red-400 border-red-500/30;
  @apply hover:bg-red-500/20 hover:border-red-500/40;
}

/* Button with text */
.toolbar-btn-text {
  @apply ml-1.5 text-xs font-medium;
}

/* Tooltip styling - Dark background with white text */
.toolbar-tooltip {
  @apply px-2 py-1 text-xs font-medium;
  @apply text-white border-0 rounded-md;
  @apply shadow-lg;
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(8px);
  z-index: 50;
}

/* Force dark tooltips in both light and dark mode */
.dark .toolbar-tooltip {
  background: rgba(0, 0, 0, 0.95);
  @apply text-white;
}

/* Model selector specific */
.model-selector-item .chat-control-btn {
  @apply h-8 px-3 border border-border/50;
  @apply hover:bg-accent/80 hover:border-border;
  @apply transition-all duration-200;
  min-width: 140px;
}

/* Standardized dropdown triggers */
.toolbar-item select,
.toolbar-item [role="combobox"] {
  @apply h-8 px-3 text-xs;
  min-width: 140px;
  max-width: 180px;
}

/* File preview area */
.toolbar-file-preview {
  @apply flex items-center gap-2 pl-2 border-l border-border/30;
  max-width: 200px;
  overflow-x: auto;
}

/* Animations */
@keyframes pulse-stop {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.2);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
  }
}

/* Dark mode adjustments */
.dark .toolbar-btn {
  @apply hover:bg-accent/60;
}

.dark .toolbar-divider {
  @apply bg-border/20;
}

.dark .chat-toolbar-modern {
  @apply bg-background/40;
}

/* Mobile responsiveness */
@media (max-width: 640px) {
  .chat-toolbar-container {
    @apply px-2 py-2 gap-2;
    overflow-x: auto;
  }
  
  .toolbar-btn {
    @apply h-9 w-9;
  }
  
  .toolbar-divider {
    @apply mx-0.5;
  }
  
  .model-selector-item .chat-control-btn {
    min-width: 120px;
  }
}

/* Responsive dropdown sizing for toolbar */
/* Large tablets and below: reduce dropdown width */
@media (max-width: 1024px) {
  .model-selector-enhanced {
    width: 130px !important;
  }
  
  .agent-selector-enhanced {
    width: 140px !important;
  }
  /* Reduce min-widths so width overrides can take effect */
  .model-selector-item .chat-control-btn { min-width: 130px !important; }
}

/* iPad portrait and similar: tighten further */
@media (max-width: 900px) {
  .model-selector-enhanced { width: 105px !important; }
  .agent-selector-enhanced { width: 115px !important; }
  .model-selector-item .chat-control-btn { min-width: 105px !important; }
}

/* Tablets and below: further reduce dropdown width */
@media (max-width: 768px) {
  .model-selector-enhanced {
    width: 100px !important;
  }
  
  .agent-selector-enhanced {
    width: 110px !important;
  }
  
  /* Reduce toolbar gaps to save space */
  .toolbar-section {
    @apply gap-1;
  }
  
  .toolbar-group {
    @apply gap-1;
  }
  /* Reduce min-widths on tablets */
  .model-selector-item .chat-control-btn { min-width: 100px !important; }
}

/* Small screens: compact dropdowns */
@media (max-width: 640px) {
  .model-selector-enhanced {
    width: 95px !important;
  }
  
  .agent-selector-enhanced {
    width: 100px !important;
  }
  .model-selector-item .chat-control-btn { min-width: 95px !important; }
}

/* Smooth transitions for all interactive elements */
.chat-toolbar-modern * {
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
/* ===== End Chat Toolbar Styles ===== */

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
    /* Dark-mode variants to keep utilities consistent */
    --border: 0 0% 14.9%;
    --accent: 0 0% 14.9%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --ring: 0 0% 83.1%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* Chat Page & Input: fixed input at bottom; messages scroll only */
.chat-page-container {
  @apply h-[100dvh] w-full overflow-hidden;
  /* Ensure chat content respects the fixed outer rail width */
  /* On mobile (< 768px), outer rail is hidden, so no margin needed */
  margin-left: var(--outer-rail-width, 64px);
}

/* Mobile: Remove margin for outer rail since it's hidden */
@media (max-width: 767px) {
  .chat-page-container {
    margin-left: 0;
  }
}

.chat-input-container {
  @apply fixed bottom-0 left-0 right-0 z-20;
  background: linear-gradient(to top, 
    hsl(var(--background)) 0%, 
    hsla(var(--background), 0.95) 70%, 
    transparent 100%);
  padding-top: 0.5rem;
  padding-bottom: 0.25rem;
  /* Align to chat content area via variables; can be set by page layout */
  left: var(--chat-left-offset, 0);
  right: var(--chat-right-offset, 0);
}

/* Mobile: Remove left offset since sidebar is hidden */
@media (max-width: 1023px) {
  .chat-input-container {
    left: 0;
    right: 0;
    padding-bottom: env(safe-area-inset-bottom, 0.25rem);
  }
}

.chat-input-sticky-spacer {
  padding-bottom: clamp(80px, 12vh, 180px);
}

.chat-input-wrapper {
  @apply w-full px-2 sm:px-4 mx-auto sm:max-w-[90%] lg:max-w-[70%];
  overflow: visible;
}

.chat-form-enhanced {
  @apply relative flex flex-col shadow-2xl;
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, 0.98) 0%, 
    rgba(248, 250, 252, 0.98) 50%,
    rgba(243, 244, 246, 0.98) 100%);
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
  border: 2px solid transparent;
  background-clip: padding-box;
  border-radius: 0.75rem;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.12),
    0 4px 16px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  position: relative;
  overflow: hidden;
}

.dark .chat-form-enhanced {
  background: linear-gradient(135deg, 
    rgba(24, 24, 27, 0.98) 0%, 
    rgba(39, 39, 42, 0.98) 50%,
    rgba(63, 63, 70, 0.98) 100%);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    0 4px 16px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.08),
    inset 0 -1px 0 rgba(255, 255, 255, 0.04);
}

.chat-textarea-container {
  @apply relative w-full overflow-hidden border-t border-border/30;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.chat-drag-active {
  @apply ring-2 ring-primary ring-offset-2;
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
}

.chat-textarea-enhanced {
  @apply flex min-h-[60px] w-full border-none bg-transparent p-4 pr-14 text-sm 
         placeholder:text-muted-foreground focus-visible:outline-none 
         focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-0 
         disabled:cursor-not-allowed disabled:opacity-50 resize-none overflow-y-auto;
  border-radius: 0;
  line-height: 1.6;
}

.chat-send-btn-enhanced {
  @apply absolute right-3 bottom-2 h-9 w-9 rounded-full 
         text-primary-foreground transition-all duration-300 
         disabled:opacity-50 disabled:cursor-not-allowed;
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%);
  background-size: 200% 200%;
  animation: gradientFlow 3s ease infinite;
  box-shadow: 
    0 4px 15px rgba(59, 130, 246, 0.3),
    0 2px 8px rgba(139, 92, 246, 0.2);
}

.chat-send-btn-enhanced:hover:not(:disabled) {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 
    0 8px 25px rgba(59, 130, 246, 0.4),
    0 4px 12px rgba(139, 92, 246, 0.3);
}

.chat-send-btn-enhanced:disabled {
  background: linear-gradient(135deg, #e5e7eb 0%, #f3f4f6 100%);
  color: #9ca3af;
  box-shadow: none;
}

@keyframes gradientFlow {
  0%, 100% { background-position: 0% 50%; opacity: 0.8; }
  50% { background-position: 100% 50%; opacity: 1; }
}
